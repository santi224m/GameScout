{% extends 'base.html' %}
{% block title %}{{ game_details.title }}{% endblock %}

{% block content %}
<div class="content">
  <h1>{{ game_details.title }}</h1>
  <img src="{{ game_details.header_img_url }}">
  <p style="padding: 1rem 0;">{{ game_details.short_description|safe }}</p>
  <p>Steam Price: {{ game_details.steam_price }}</p>
  <p>Steam Discount: {{ game_details.steam_discount }}%</p>
  <p>Release Date: {{ game_details.release_date }}</p>
  <p>Total Reviews: {{ game_details.review_count }}</p>
  <p>Positive Reviews: {{ game_details.positive_reviews }}</p>
  <p>Negative Reviews: {{ game_details.negative_reviews }}</p>
  {% set score = game_details.positive_reviews / game_details.review_count * 100 %}
  <p>{{ '%0.2f' % score|float }}% positive reviews</p>

  <p style="margin: 1rem 0; border-top: 1px solid black; padding-top: 1rem;">{{ game_details.detailed_description|safe }}</p>

  <h2 style="margin-top: 15px;">Screenshots</h2>
  {% for screenshot_url in game_details.screenshots %}
    <img style="max-width: 300px;" src="{{ screenshot_url }}">
  {% endfor %}

  {% if game_details.is_available_windows %}
    <div style="margin: 1rem 0;">
      <h3>PC Requirements</h3>
      {% if game_details.pc_requirements_min %}
      {{ game_details.pc_requirements_min|safe }}
      {% endif %}
      {% if game_details.pc_requirements_recommended %}
      {{ game_details.pc_requirements_recommended|safe }}
      {% endif %}
    </div>
  {% endif %}

  {% if game_details.is_available_mac %}
    <div style="margin: 1rem 0;">
      <h3>Mac Requirements</h3>
      {% if game_details.mac_requirements_min %}
      {{ game_details.mac_requirements_min|safe }}
      {% endif %}
      {% if game_details.mac_requirements_recommended %}
      {{ game_details.mac_requirements_recommended|safe }}
      {% endif %}
    </div>
  {% endif %}

  {% if game_details.is_available_linux %}
    <div style="margin: 1rem 0">
      <h3>Linux Requirements</h3>
      {% if game_details.linux_requirements_min %}
      {{ game_details.linux_requirements_min|safe }}
      {% endif %}
      {% if game_details.linux_requirements_recommended %}
      {{ game_details.linux_requirements_recommended|safe }}
      {% endif %}
    </div>
  {% endif %}
</div>

{% if game_details.hltb %}
<h2>HowLongToBeat Data</h2>
<p>Main: {{ game_details.hltb.main }}</p>
<p>Main + Sides: {{ game_details.hltb.main_extra }}</p>
<p>Completionist: {{ game_details.hltb.completionist }}</p>
<p>All Styles: {{ game_details.hltb.all_styles }}</p>
{% endif %}

{% for deal in game_details.deals %}
<p style="margin: 1rem 0;">Store: {{ deal['storeName'] }}, DealID: {{ deal['dealID'] }}, Current Price: {{ deal['price'] }}, Retail Price: {{ deal['retailPrice'] }}, Savings: {{ '%0.2f' % deal['savings']|float }}%</p>
{% endfor %}

{% if game_details.steam_reviews|length > 0 %}
<h2>Steam Reviews</h2>

{% for review in game_details.steam_reviews %}
<p style="margin: 1rem 0;">{{ review['review'] }}</p>
{% endfor %}

{% endif %}

{% endblock %}